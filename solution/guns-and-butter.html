




<!doctype html>
<html>
<head>
    <style>
    
        html {
            --accent-rgb: 56, 75, 160;
            --secondary-accent-rgb: 28, 39, 81;
            --accent-hover-color: #2af;
        }
    
        
    </style>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no">
    
<title>Solution: Guns and Butter</title>

    
        
            <link rel="icon" sizes="16x16 32x32 48x48 64x64" href="../static/images/favicon-ph23.ico" type="image/vnd.microsoft.icon">
        
    
    <meta name="viewport" content="width=device-width, initial-scale=0.5">
    <meta property="og:title" content="Puzzle University">
    <meta property="og:description" content="Registration for this year's Puzzle University is now open!">
    <!--meta property="og:image" content="http://localhost:8000/static/images/favicon-ph23.ico"-->
    <meta property="twitter:card" content="summary_large_image">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <!-- Myriad font -->
    <link rel="stylesheet" href="https://use.typekit.net/zwt2rdl.css">
    <!-- Material icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="../static/css/skeleton.css">
    <link rel="stylesheet" href="../static/css/base.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.touchswipe/1.6.19/jquery.touchSwipe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.formset/1.2.2/jquery.formset.min.js"></script>
    <script src="../jsi18n/index.html"></script>
    <script src="../static/js/sorttable.js"></script>
    <script src="../static/js/tray.js"></script>
    <script src="../static/js/notify.js"></script>
    <script src="../static/js/time.js"></script>
    <script src="../static/js/menu-button-links.js"></script>
<script src="../static/js/puzzledb.js"></script>
<script src="../static/js/teamstate.js"></script>
</head>
<body>
    
    
    <div class="header-bar">
        
    </div>
    <nav>
        <span class="tray">
            <div class="top-tabs">
                <a href="../index.html">
                    Home
                </a>
                <a href="../rules.html">
                    Policies
                </a>
                
                <a href="../story.html">
                    Story
                </a>
                
                
                
                <div id="deptdropdownmenu"> </div>                
                
                <a href="../teams.html">
                    Directory
                </a>
                <a href="../faq.html">
                    FAQ
                </a>
                

                
            </div>
            <div class="top-left-actions">
                
<a href="../puzzle/guns-and-butter.html" class="btn">Back to the puzzle</a>

            </div>
        </span>

    </nav>
    
    <script>
    
    
    </script>
    <div class="header">
        
    </div>
    <div class="content">
        

<style>
h2 {
    font-size: 2.5rem;
    font-weight: normal;
    font-style: italic;
    margin-bottom: 2rem;
}

h4 {
    font-size: 2rem;
    font-weight: normal;
    margin: 2rem 0;
}
</style>

<h1>
    Solution: Guns and Butter
    <div class="solved-title-marker">Answer: <span class="solved-title-answer spoiler">VISA</span></div>
</h1>

<main class="puzzle-main">
    <h2 style="margin-top: 0">
        Written by
        
Kenny Young

    </h2>

    
    <style>
    .guns-and-butter {
        display: flex;
        flex-wrap: wrap;
    }

    .guns-and-butter .layers {
        margin: 0px auto;
        position: relative;
    }

    .guns-and-butter.solution {
        pointer-events: none;
    }

    .numbers {
        padding: 0px;
        margin: 0px;
    }

    .dominoes {
        position: absolute;
        top: 0px;
        left: 0px;
        width: calc(100% + 2px);
        height: calc(100% + 2px);
        padding: 0px;
        margin: 0px;
    }

    .disabled {
        pointer-events: none;
    }

    .numbers tr td {
        width: 40px;
        height: 40px;
        padding: 0px;
        margin: 0px;
        border: 1px solid black;
        border-bottom: 1px solid black;
        background: transparent;
        text-align: center;
        font-size: 20px;
        font-weight: bold;
        user-select: none;
    }

    .numbers tr:first-child td {
        border-top: none;
        border-left: none;
        border-right: none;
    }

    .numbers tr td:first-child {
        border-top: none;
        border-left: none;
        border-bottom: none;
    }

    .numbers td.gun {
        background-color: lightgray;
    }

    .numbers td.butter {
        background-color: yellow;
    }

    .numbers td.used-by-domino {
        background-color: yellow;
    }

    .dominoes rect {
        stroke-width: 8px;
        stroke: transparent;
        fill: transparent;
    }

    .dominoes rect.path-on {
        stroke: black;
    }

    .part {
        padding: 0px;
        margin: 5px;
        user-select: none;
        cursor: pointer;
    }

    .part tr td {
        width: 20px;
        height: 20px;
        border: 1px solid black;
        border-bottom: 1px solid black;
        padding: 0px;
        margin: 0px;
        line-height: 1.5rem;
        font-size: smaller;
        text-align: center;
    }

    .part.gun.used td {
        background: lightgray;
    }

    .part.butter.used td {
        background: yellow;
    }

    .parts {
        margin-top: 1.5rem;
        display: flex;
        flex-wrap: wrap;
    }

    .example {
        border: 2px solid;
        padding: 20px;
    }

    @media print {
        body {
            font-size: 14px;
            line-height: 15px;
        }

        p {
            margin-bottom: 6px;
        }

        .guns-and-butter {
            page-break-after: always;
        }

        .instructions {
            display: none;
        }
    }
</style>
<script>
    document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll(".guns-and-butter").forEach((t) => { new GunsAndButter(t); });
    });

    function GunsAndButter(t) {
            this.container = t;
            this.dominoes = this.container.querySelector(".dominoes");
            this.undoStack = [];
            this.redoStack = [];
            this.maxCol = 0;
            this.maxRow = 0;

            this.horzdominoes = {};
            this.vertdominoes = {};
            this.usedbydomino = {};
            this.usedbyship = {};

            this.redoUnit = function(unit) {
                var elem = unit.elem;

                if (unit.adds) {
                    unit.adds.forEach((a) => { elem.classList.add(a); });
                }

                if (unit.removes) {
                    unit.removes.forEach((a) => { elem.classList.remove(a); });
                }

                if (unit.children) {
                    unit.children.forEach((c) => { this.redoUnit(c) });
                }

                if (unit.oldValue || unit.newValue) {
                    elem.value = unit.newValue;
                }
            }

            this.undoUnit = function(unit) {
                var elem = unit.elem;

                if (unit.adds) {
                    unit.adds.forEach((a) => { elem.classList.remove(a); });
                }

                if (unit.removes) {
                    unit.removes.forEach((a) => { elem.classList.add(a); });
                }

                if (unit.children) {
                    unit.children.forEach((c) => { this.undoUnit(c) });
                }

                if (unit.oldValue || unit.newValue) {
                    elem.value = unit.oldValue;
                }
            }

            this.undo = function() {
                if (this.undoStack.length == 0) { return; }

                var unit = this.undoStack.pop();
                this.undoUnit(unit);
                this.redoStack.push(unit);
                this.rebuildUsedby();
            }

            this.redo = function() {
                if (this.redoStack.length == 0) { return; }

                var unit = this.redoStack.pop();
                this.redoUnit(unit);
                this.undoStack.push(unit);
                this.rebuildUsedby();
            }

            this.modifyClass = function(elem, adds, removes, newValue) {
                var trueAdds = [];
                var trueRemoves = [];

                adds.forEach((a) => { if (!elem.classList.contains(a)) { trueAdds.push(a); }});
                removes.forEach((r) => { if (elem.classList.contains(r)) { trueRemoves.push(r); }});

                if (trueAdds.length == 0 && trueRemoves.length == 0 && newValue == null) { return; }

                var unit = { "elem": elem };
                if (trueAdds.length > 0) { unit.adds = trueAdds; }
                if (trueRemoves.length > 0) { unit.removes = trueRemoves; }
                if (newValue != null) { unit.oldValue = elem.value; unit.newValue = newValue; }

                this.redoUnit(unit);
                this.undoStack.push(unit);
                this.redoStack = [];
                this.rebuildUsedby();
            }

            this.rebuildUsedby = function() {
                this.usedbydomino = {};
                this.usedbyship = {};
                for (const [key, value] of Object.entries(this.horzdominoes)) {
                    if (value.classList.contains("path-on")) {
                        this.usedbydomino[key] = true;
                        this.usedbydomino[key - this.maxCol] = true;
                    }
                }

                for (const [key, value] of Object.entries(this.vertdominoes)) {
                    if (value.classList.contains("path-on")) {
                        this.usedbydomino[key] = true;
                        this.usedbydomino[key - 1] = true;
                    }
                }

                this.container.querySelectorAll("td").forEach((td) => {
                    var col = Array.prototype.indexOf.call(td.parentElement.children, td);
                    var row = Array.prototype.indexOf.call(td.parentElement.parentElement.children, td.parentElement);

                    if (this.usedbydomino[row * this.maxCol + col]) {
                        td.classList.add("used-by-domino");
                    } else {
                        td.classList.remove("used-by-domino");
                    }

                    if (td.classList.contains("gun")) {
                        this.usedbyship[row * this.maxCol + col] = true;
                    }
                });
            }

            this.createPath = function(x, y, w, h) {
                var rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                rect.setAttributeNS(null, "x", x);
                rect.setAttributeNS(null, "y", y);
                rect.setAttributeNS(null, "width", w);
                rect.setAttributeNS(null, "height", h);
                this.dominoes.appendChild(rect);

                return rect;
            }

            this.createHorzPath = function(x, y) {
                var path = this.createPath(x * 100, y * 100 - 100, 100, 200);
                this.horzdominoes[y * this.maxCol + x] = path;
                return path;
            }

            this.createVertPath = function(x, y) {
                var path = this.createPath(x * 100 - 100, y * 100, 200, 100);
                this.vertdominoes[y * this.maxCol + x] = path;
                return path;
            }

            this.toggleHorzPath = function(x, y) {
                var path = this.horzdominoes[y * this.maxCol + x];
                if (path != null && path.classList.contains("path-on")) {
                    this.modifyClass(path, [], ["path-on"], null);
                } else {
                    var code = y * this.maxCol + x;
                    var codePrev = code - this.maxCol;
                    if (this.usedbydomino[code] || this.usedbyship[code] || this.usedbydomino[codePrev] || this.usedbyship[codePrev]) { return; }
                    if (path == null) {
                        path = this.createHorzPath(x, y);
                    }
                    this.modifyClass(path, ["path-on"], [], null);
                }
            }

            this.toggleVertPath = function(x, y) {
                var path = this.vertdominoes[y * this.maxCol + x];
                if (path != null && path.classList.contains("path-on")) {
                    this.modifyClass(path, [], ["path-on"], null);
                } else {
                    var code = y * this.maxCol + x;
                    var codePrev = code - 1;
                    if (this.usedbydomino[code] || this.usedbyship[code] || this.usedbydomino[codePrev] || this.usedbyship[codePrev]) { return; }
                    if (path == null) {
                        path = this.createVertPath(x, y);
                    }
                    this.modifyClass(path, ["path-on"], [], null);
                }
            }

            var shape = this.container.getAttribute("data-shape").split("|");
            var numbers = this.container.querySelector(".numbers");
            var solution = this.container.getAttribute("data-solution");

            if (solution) { solution = solution.split("|"); }

            for (var r = 0; r < shape.length; r++) {
                var tr = document.createElement("tr");

                for (var c = 0; c < shape[r].length; c++) {
                        var td = document.createElement("td");

                        if (r > 0 && c > 0) {
                            if (solution) {
                                var s = solution[r][c];
                                if (s == "G") {
                                    td.classList.add("gun");
                                } else if (s== "H") {
                                    this.toggleVertPath(c + 1, r);
                                } else if (s== "V") {
                                    this.toggleHorzPath(c, r + 1);
                                }
                            }
                        }

                        const value = shape[r][c];
                        if (value != ".") {
                            td.innerText = value;
                        }

                        tr.appendChild(td);
                }

                this.maxCol = Math.max(this.maxCol, c);

                numbers.appendChild(tr);
            }

            this.rebuildUsedby();
            this.maxRow = r;

            this.dominoes.setAttributeNS(null, "viewBox", "0 0 " + (this.maxCol * 100 + 4).toString() + " " + (this.maxRow * 100 + 4).toString());
            var outline = this.createPath(100, 100, (this.maxCol - 1) * 100, (this.maxRow - 1) * 100);
            outline.classList.add("path-on");
    }
</script>
<p>The solved grid looks like this:</p>
<div class="guns-and-butter puzzle solution" data-shape="....4.......|265172~26743|874846863465|.77217474212|.735~1635522|.432866~7511|.17856873556|.~1147~~1133|.5346833488~|.122653~4883|.2~216~44885" data-solution="....4.......|2HBHBGVHBHBG|8GGGVGBGGGVG|.VHBBGVVVVBV|.BGHBGBBBBVB|.HBHBHBVHBBG|.VHBGVGBVHBV|.BHBGBHBBVVB|.VVVHBHBVBBV|.BBBGHBVBHBB|.GHBGHBBHBHB"><div class="layers"><table class="numbers"></table><svg class="dominoes disabled" xmlns="http://www.w3.org/2000/svg" version="1.1"></svg></div></div>
<p><br/><p>Now that the grid is complete, we can look around the 1x1 ships as instructed; specifically, we can sum the values that are orthogonally touching each of the ships. In order:</p></p>
<table style="margin: 0px auto;"><tr><td>7 + 7 + 5 + 3 = 22</td><td>V</td></tr><tr><td>6 + 2 + 1 = 9</td><td>I</td></tr><tr><td>7 + 6 + 6 + 0 = 19</td><td>S</td></tr><tr><td>1 + 0 = 1</td><td>A</td></tr></table>
<p>Thus the answer is VISA.</p>

    
    

    
    
</main>


    </div>
    <footer>
        Powered by <a href="https://github.com/galacticpuzzlehunt/gph-site">gph-site</a>
    </footer>

</body>
</html>
